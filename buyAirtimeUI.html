
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Buy Airtime</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />
    <meta name="description" content="ArchitectUI HTML Bootstrap 4 Dashboard Template">

    <meta name="msapplication-tap-highlight" content="no">
    <link href="https://topupsocket.com/gift/main.d810cf0ae7f39f28f336.css" rel="stylesheet">
    <link href="https://topupsocket.com/gift/assets/icons/pixeden-stroke-7-icon/dist/pe-icon-7-stroke.min.css" rel="stylesheet">
    <link href="https://topupsocket.com/gift/assets/icons/linearicons/style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://topupsocket.com/gift/assets/css/custom-style.css" rel="stylesheet">     
</head>

<body>
<div class="app-container app-theme-white body-tabs-shadow fixed-header fixed-sidebar">

    <div class="app-header header-shadow">
    <div class="app-header__logo">
        <!-- <div class="logo-src"></div> -->
        <h5><strong>Float Portal</strong></h5>
        <div class="header__pane ml-auto">
            <div>
                <button type="button" class="hamburger close-sidebar-btn hamburger--elastic" data-class="closed-sidebar">
                    <span class="hamburger-box">
                        <span class="hamburger-inner"></span>
                    </span>
                </button>
            </div>
        </div>
    </div>
    <div class="app-header__mobile-menu">
        <div>
            <button type="button" class="hamburger hamburger--elastic mobile-toggle-nav">
                <span class="hamburger-box">
                    <span class="hamburger-inner"></span>
                </span>
            </button>
        </div>
    </div>
    <div class="app-header__menu">
        <span>
            <button type="button" class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
                <span class="btn-icon-wrapper">
                    <i class="fa fa-ellipsis-v fa-w-6"></i>
                </span>
            </button>
        </span>
    </div>
    <div class="app-header__content">
        <div class="app-header-right">
            <div class="header-btn-lg pr-0">
                <div class="widget-content p-0">
                    <div class="widget-content-wrapper">
                        <div class="widget-content-left">
                            <div class="btn-group">
                                <a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="p-0 btn">
                                    <img width="42" class="rounded-circle" src="https://topupsocket.com/gift/assets/images/avatars/default-avatar.png" alt="">
                                    <i class="fa fa-angle-down ml-2 opacity-8"></i>
                                </a>
                                <div tabindex="-1" role="menu" aria-hidden="true" class="rm-pointers dropdown-menu-lg dropdown-menu dropdown-menu-right">
                                    <div class="dropdown-menu-header">
                                        <div class="dropdown-menu-header-inner bg-info">
                                            <!-- <div class="menu-header-image opacity-2"
                                                        style="background-image: url('assets/images/dropdown-header/city3.jpg');">
                                                    </div> -->
                                            <div class="menu-header-content text-left">
                                                <div class="widget-content p-0">
                                                    <div class="widget-content-wrapper">
                                                        <div class="widget-content-left mr-3">
                                                            <img width="42" class="rounded-circle" src="https://topupsocket.com/gift/assets/images/avatars/default-avatar.png" alt="">
                                                        </div>
                                                        <div class="widget-content-left">
                                                            <div class="widget-heading">234web Resources</div>
                                                        </div>
                                                        <div class="widget-content-right mr-2">
                                                            <a href="https://topupsocket.com/gift/logout" class="btn-pill btn-shadow btn-shine btn btn-focus">Logout</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="scroll-area-xs" style="height: 150px;">
                                        <div class="scrollbar-container ps">
                                            <ul class="nav flex-column">
                                                <li class="nav-item-header nav-item">My Account
                                                </li>
                                                <li class="nav-item">
                                                    <a href="javascript:void(0);" class="nav-link">Recover
                                                        Password</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="widget-content-left  ml-3 header-user-info">
                            <div class="widget-heading"> 234web Resources </div>
                            <div class="widget-subheading"> Plan name </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <div class="app-main">

        <div class="app-sidebar sidebar-shadow">
                <div class="app-header__logo">
                    <div class="logo-src"></div>
                    <div class="header__pane ml-auto">
                        <div>
                            <button type="button" class="hamburger close-sidebar-btn hamburger--elastic"
                                data-class="closed-sidebar">
                                <span class="hamburger-box">
                                    <span class="hamburger-inner"></span>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="app-header__mobile-menu">
                    <div>
                        <button type="button" class="hamburger hamburger--elastic mobile-toggle-nav">
                            <span class="hamburger-box">
                                <span class="hamburger-inner"></span>
                            </span>
                        </button>
                    </div>
                </div>
                <div class="app-header__menu">
                    <span>
                        <button type="button"
                            class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
                            <span class="btn-icon-wrapper">
                                <i class="fa fa-ellipsis-v fa-w-6"></i>
                            </span>
                        </button>
                    </span>
                </div>
                <div class="scrollbar-sidebar">
                    <div class="app-sidebar__inner">
                        <ul class="vertical-nav-menu">
                                                    
                            <li class="mt-3">
                                <a href="https://topupsocket.com/gift/dashboard">
                                    <i class="pe-7s-graph"></i>
                                    Dashboard                                </a>
                            </li>
                                                    
                            <li class="mt-3">
                                <a href="https://topupsocket.com/gift/buyAirtime">
                                    <i class="pe-7s-credit"></i>
                                    Buy Airtime                                </a>
                            </li>
                                                    
                            <li class="mt-3">
                                <a href="https://topupsocket.com/gift/buydata">
                                    <i class="pe-7s-signal"></i>
                                    Buy Data                                </a>
                            </li>
                                                    
                            <li class="mt-3">
                                <a href="https://topupsocket.com/gift/buyWin">
                                    <i class="pe-7s-refresh-2"></i>
                                    Buy & Win                                </a>
                            </li>
                                                    
                            <li class="mt-3">
                                <a href="https://topupsocket.com/gift/hynetflexSub">
                                    <i class="pe-7s-cloud-upload"></i>
                                    Hynetflex Subscribtion                                </a>
                            </li>
                        
                        
                            <li class="mt-3 ">
                                <a href="#">
                                    <i class="pe-7s-wallet"></i>
                                    My Wallet                                    <i class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
                                </a>
                                <ul>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/fundWallet" class="fo">
                                                <i class="metismenu-icon"></i> Fund Wallet                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/shareMoney" class="fo">
                                                <i class="metismenu-icon"></i> Share Money                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/purchaseBuyWin" class="fo">
                                                <i class="metismenu-icon"></i> Purchase Buy & Win                                            </a>
                                        </li>
                                                                    </ul>
                            </li>
                        
                            <li class="mt-3 ">
                                <a href="#">
                                    <i class="pe-7s-paint-bucket"></i>
                                    My Commissions                                    <i class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
                                </a>
                                <ul>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/convertCommissions" class="fo">
                                                <i class="metismenu-icon"></i> Convert Commisions                                            </a>
                                        </li>
                                                                    </ul>
                            </li>
                        
                            <li class="mt-3 ">
                                <a href="#">
                                    <i class="pe-7s-rocket"></i>
                                    Floats                                    <i class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
                                </a>
                                <ul>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/floatCommunity" class="fo">
                                                <i class="metismenu-icon"></i> Float Community                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/shareFloat" class="fo">
                                                <i class="metismenu-icon"></i> Share Float                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/myFloatHistory" class="fo">
                                                <i class="metismenu-icon"></i> My Float History                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/myBank" class="fo">
                                                <i class="metismenu-icon"></i> Float Account                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/sellFloat" class="fo">
                                                <i class="metismenu-icon"></i> Sell Float                                            </a>
                                        </li>
                                                                    </ul>
                            </li>
                        
                            <li class="mt-3 ">
                                <a href="#">
                                    <i class="pe-7s-note2"></i>
                                    My Earning                                    <i class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
                                </a>
                                <ul>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/myReferralEaning" class="fo">
                                                <i class="metismenu-icon"></i> My Referral Earning                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/myCashBackEaning" class="fo">
                                                <i class="metismenu-icon"></i> My Cashback Earning                                            </a>
                                        </li>
                                                                    </ul>
                            </li>
                        
                            <li class="mt-3 ">
                                <a href="#">
                                    <i class="pe-7s-user"></i>
                                    My Account                                    <i class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
                                </a>
                                <ul>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/updateProfile" class="fo">
                                                <i class="metismenu-icon"></i> Update Profile                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/modifyTransactPIN" class="fo">
                                                <i class="metismenu-icon"></i> Modify PIN                                            </a>
                                        </li>
                                                                    </ul>
                            </li>
                        
                            <li class="mt-3 ">
                                <a href="#">
                                    <i class="pe-7s-chat"></i>
                                    Support System                                    <i class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
                                </a>
                                <ul>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/createTicket" class="fo">
                                                <i class="metismenu-icon"></i> Create Ticket Support                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/myTicketHistory" class="fo">
                                                <i class="metismenu-icon"></i> My Ticket History                                            </a>
                                        </li>
                                                                            <li class="mt-1">
                                            <a href="https://topupsocket.com/gift/viewtickets" class="fo">
                                                <i class="metismenu-icon"></i> View Ticket                                            </a>
                                        </li>
                                                                    </ul>
                            </li>
                                                </ul>
                    </div>
                </div>
            </div>
        <div class="app-main__outer">
            <div class="app-main__inner">
                <div class="app-page-title app-page-title-simple">
    <div class="page-title-wrapper">
        <div class="page-title-heading">
            <div>
                <div class="page-title-head center-elem">
                    <span class="d-inline-block pr-2">
                        <i class="lnr-apartment opacity-6"></i>
                    </span>
                    <span class="d-inline-block">Hello <strong>234web Resources</strong></span>
                </div>
            </div>
        </div>
        <div class="page-title-actions">
            <div class="d-inline-block pr-3">
                <select id="custom-inp-top" type="select" class="custom-select">
                    <option>Select period...</option>
                    <option>Last Week</option>
                    <option>Last Month</option>
                    <option>Last Year</option>
                </select>
            </div>
            <button type="button" data-toggle="tooltip" data-placement="left" class="btn btn-dark"
                title="Show a Toastr Notification!">
                <i class="fa fa-battery-three-quarters"></i>
            </button>
        </div>
    </div>
</div>
                <div class="row">

                    <div class="col-md-12">
                        <div class="main-card mb-3 card">
                            <div class="card-header">
                                <b>Buy Airtime</b>
                            </div>
                            <div class="card-body">
                                <form class="buyairtime" method="post" action="#">
                                    <div class="row">
                                        <div class="col-md-6">
                                             <div class="position-relative form-group ">
                                                <label class="">Network</label>
                                                <select class="form-control network" name="network" id="net" required>
                                                    <option value="mtn">MTN</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="position-relative form-group">
                                                <label class="">Phone number</label>
                                                <input class="form-control" name="userPhone" minlength="11" maxlength="11" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="position-relative form-group">
                                                <label class="">Amount</label>
                                                <input class="form-control" name="amount" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="position-relative form-group">
                                                <label class="">Payable Amount</label>
                                                <input class="form-control" name="payable" required>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="mt-1 btn btn-primary shareFloat" name="shareFloat" type="submit">
                                        <b><i class="fa fa-paper-plane"></i> Send </b>
                                    </button>
                                </form>
                            </div>  
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="https://topupsocket.com/gift/assets/scripts/jquery-3.3.1.min.js" type="text/javascript"></script>
<script type="text/javascript" src="assets/scripts/main.d810cf0ae7f39f28f336.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.0/dist/sweetalert2.all.min.js"></script>

<script>
    function showTxPin(isShow = false) {
        if(isShow) {
            $(".transctPinDiv").removeClass('d-none');
        }
        else {
            $(".transctPinDiv").addClass('d-none');
        }
    }
</script>
<script>
    const selfPhoneNo = "08129871451"

    function checkFields() {
        let userPhone = $('.userPhone').val()
        let userName = $('.userName').val()
        let amount = $('.amount').val()
        let pin = $('.pin').val()

        if (userName != '' && userPhone != '' && amount != '' && pin != '') {
            $(".shareFloat").removeAttr('disabled')
        } else if (userName == '' || userPhone == '' || amount == '' || pin == '') {
            $(".shareFloat").attr('disabled', true)
        }
    }

    // $(".userPhone").focusout(() =>{
        
    $(".userPhone").keyup(() =>{
        let userPhone = $(".userPhone").val();
        if(selfPhoneNo == userPhone) {
            $('.userName').parent().addClass('d-none')
            showTxPin(false);

            swal.fire({
                title: "Error",
                html: "You can not share float to yourself",
            })
        }
        else if(userPhone.length == 11) {
            $.ajax({
                type:'GET',
                url: "https://topupsocket.com/gift/api/user",
                data: {
                    phone: userPhone,
                },
                beforeSend: function () {
                    swal.fire({
                        title: "Fetching User",
                        text: "Please wait",
                        didOpen: function() {
                            swal.showLoading()
                        }
                    })
                },
                success: function(data){
                    swal.close()
                    if (data.error) {
                        $('.userName').parent().addClass('d-none')
                        showTxPin(false);
    
                        swal.fire({
                            title: "Error",
                            html: data.error,
                        })
                    } else {
                        $('.userName').parent().removeClass('d-none')
                        $('.userName').val(data.data.fullname)
                        showTxPin(true);
                    }
    
                    checkFields()
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    swal.close()
                    checkFields()
                }
            });
        } else {
            $('.userName').parent().addClass('d-none')
            showTxPin(false);
        }
    })

    $(".amount, .pin").keyup(() =>{
        checkFields()
    })
    
    var load_form = true; //Should form load...?

    // confirmation
    // $(".shareFloat").click((e) => {
    $(".shareFloat").click(function(e) {
        e.preventDefault();

        var amount = $(".amount").val();
        var userPhone = $(".userPhone").val();
        var transactPin = $(".pin").val();
        var userName = $(".userName").val();

        if (load_form) {

            if (amount == '' || amount == undefined || amount < 0 || userPhone == '' || transactPin == '') {
                swal.fire({
                    icon: "info",
                    html: "Please fill all filed before proceeding",
                    title: "Missing field",
                    allowOutsideClick: false
                })
            } else if (transactPin.length < 4 || transactPin.length > 4) {
                swal.fire({
                    icon: "info",
                    html: "Transaction pin should not be more or less than 4 digit length",
                    title: "Error",
                    allowOutsideClick: false
                })
            } else if (userPhone.length < 11 || userPhone.length > 11) {
                swal.fire({
                    icon: "info",
                    html: "Please enter a valid mobile number",
                    title: "Missing field",
                    allowOutsideClick: false
                })
            } else if (selfPhoneNo == userPhone) {
                swal.fire({
                    icon: "info",
                    html: "You can not share float to yourself",
                    title: "Missing field",
                    allowOutsideClick: false
                })
            } else {

                var form = $(this).parents('form');

                swal.fire({
                    icon: "question",
                    html: "You are about to share float worth &#8358;"+amount+" to "+userName,
                    title: "Confirm",
                    allowOutsideClick: false,
                    showCancelButton: true,
                    showLoaderOnConfirm: true
                }).then((result) => {
                    if (result.isConfirmed) {
                        form.append("<input type='hidden' name='shareFloat'/>");
                        form.submit();
                        $(".shareFloat").html("Please wait <i class='fa fa-spinner fa-spin'></i>").prop("disabled", true);
                    }
                });

            }
        }
        return false;
    })

</script>


</body>


</html>